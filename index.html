<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <title>amp-iframe hatena</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <script type="text/javascript" src="https://s.hatena.ne.jp/js/HatenaStar.js"></script>
</head>

<body>
  <div class="container">
    <div style="display:none">
      <h1 id="title">Title</h1>
      <a href="https://sandbox-amp-hatenastar.vercel.app/"></a>
    </div>
    <div id="hatena-star-container"></div>
  </div>
  <script>
    window.addEventListener('message', receiveMessage, false);
    function receiveMessage(event) {
      if (event.data) {
        var msg;
        try {
          msg = JSON.parse(event.data);
        } catch (err) {
          // Do nothing
        }
        if (!msg)
          return false;

        if (msg.name === 'resize' || msg.name === 'rendered') {
          window.parent.postMessage({
            sentinel: 'amp',
            type: 'embed-size',
            height: msg.data.height
          }, '*');
        }
      }
    }
  </script>
  <script>
      Hatena.Star.SiteConfig = {
        entryNodes: {
          'div.container': {
            uri: 'window.location',
            title: 'document.title',
            container: 'div#hatena-star-container'
          }
        }
      };
  </script>
</body>
</html>